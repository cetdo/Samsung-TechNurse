<html>
<title>Tech Nurse | Login</title>


<head></head>

<body onload="checarToken()">

    <div id="container">
        <p href="https://imgur.com/3XVWGla"><img src="https://i.imgur.com/3XVWGla.png" title="source: imgur.com"
                style="width:110px;height:30px;" /></p>
        <label for="email">Email: </label>
        <input id="email" type="email">
        <label for="senha">Senha: </label>
        <input id="senha" type="password"><br>
        <button id="confima" class="button" onclick="entrar()">Entrar</button>

        <head>
            <style type="text/css">
 
                body {
                    width: 100%;
                    height: 100%;
                    font-family: 'Open Sans', sans-serif;
                    color: #444;
                    -webkit-font-smoothing: antialiased;
                    background: #f0f0f0;
                }

                
                #container {
                    position: fixed;
                    width: 340px;
                    height: 350px;
                    top: 25%;
                    left: 50%;
                    margin-top: -140px;
                    margin-left: -170px;
                    background: #fff;
                    border-radius: 3px;
                    border: 1px solid #ccc;
                    box-shadow: 5px 10px 8px #888888;
                }

                label {
                    color: #555;
                    display: inline-block;
                    margin-left: 18px;
                    padding-top: 10px;
                    font-size: 18px;
                }

                




                input {
                    font-family: 'Open Sans', sans-serif;
                    font-size: 16px;
                    outline: none;
                }


                input[type=email],
                input[type=password],
                input[type=nome] {
                    color: grey;
                    padding-left: 10px;
                    margin: 5px;
                    margin-top: 12px;
                    margin-left: 18px;
                    width: 290px;
                    height: 35px;
                    border: 1px solid #6CF3C1;
                    border-radius: 1px;
                    box-shadow: inset 0 1px 1px rgba(190, 190, 190, .4), 0 0 0 1px #6CF3C1;/
                }

                .button {
                    float: right;
                    position: relative;
                    margin-right: 20px;
                    margin-top: 50px;
                    width: 300px;
                    height: 30px;
                    background-color: #6CF3C1;
                    border: 1px solid #6CF3C1;
                    box-shadow: 0 1px 2px rgba(0, 0, 0, .3), inset 0 1px 0 rgba(255, 255, 255, .5);
                    cursor: pointer;
                    -webkit-transition-duration: 0.4s;
                    transition-duration: 0.4s;
                    cursor: pointer;
                    font-size: 16px;

                }

                p {
                    text-align: center;
                    color: #555
                }

                
            </style>
        </head>

    </div>


    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>

        function entrar() {
            em = document.getElementById("email").value
            sen = document.getElementById("senha").value

            axios({
                method: 'post',
                url: 'http://localhost:3333/api/auth/login',
                data: {
                    "email": em,
                    "password": sen
                }
            })
                .then(data => {
                    alert('Login efetuado com sucesso!')
                    tk = data.data.token
                    localStorage.setItem('ultimo', tk)
                    window.location.href = "http://localhost:3333/home"
                })
                .catch(erro => {
                    alert('Erro ao efetuar login!')
                })


        }

        function checarToken() {
            if (localStorage.getItem("ultimo") !== null) {
                window.location.href = "http://localhost:3333/adm"
            }
        }


    </script>
</body>

</html>